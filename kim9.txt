Revision log
This post supports Generic Fanuc code output for 3 and 4 axis milling
It is designed to support the features of Mastercam Mill V9

Following Misc Integers are used
mi2  Absolute or Incremental positioning at top level
       0  absolute
       1  incremental
mi9  Lock on First WCS  Set in first operation
       0  No
       1  Yes
mi10  M00 before operation
        0  No
        1  Yes
Work offsets
wcstype  Work coordinate system 
           0  Reference return is generated and G92 with the 
               X Y and Z home positions at file head
           1  Reference return is generated and G92 with the 
               X Y and Z home positions at each tool
           2  WCS of G54 G55 based on Mastercam settings
               0 thru 5  The WCS of G54 thru G59 respectively
               6 and up  The WCS of G541 P1 and up
           3  Off
Canned text
   Entering cantext on a contour point from within Mastercam allows the
   following functions to enable/disable
   Cantext value
   1  Stop  output the M00 stop code
   2  Ostop   output the M01 optional stop code
   3  Bld on  turn on block delete codes in NC lines
   4  bLd off  turn off block delete codes in NC lines
   5  Dwell  Input G04 P1 command
Milling toolpaths 4 axis
Layout
The term Reference View refers to the coordinate system associated
with the Top view AltF9 the upper gnomon of the three displayed
Create the part drawing with the axis of rotation about the axis
of the Reference View according to the setting you entered for
vmc' vertical or horizontal and 'rotonx' machine relative
axis of rotation
vmc  1 vertical machine uses the top toolplane as the base machine
view
vmc  0 horizontal machine uses the front toolplane as the base machine
Relative to the machine matrix 
Rotation zero position is on the Z axis for rotation on X axis
Rotation zero position is on the Z axis for rotation on Y axis
Rotation zero position is on the X axis for rotation on Z axis
The machine view rotated about the selected axis as a single axis
rotation are the only legal views for 4 axis milling  Rotation
direction around the part is positive in the CCW direction when
viewed from the plus direction of the rotating axis  Set the variable 
rotccwpos' to indicate the signed direction  Always set the work
origin at the center of rotation
Toolplane Positioning
Create the Cplane and Tplane as the rotation of the machine view about 
the selected axis of rotation  The toolplane is used to calculate
the position of the rotary axis  This is the default setting
3 Axis Rotary Polar
Polar positioning is offered in Mastercam 3 axis toolpaths through the 
rotary axis options dialog  The selected toolpath is converted to angle
and radius position  The axis of rotation is forced to zero
Axis substitution
Use the Rotary axis substitution by drawing the geometry flattened
from the cylinder  The rotary axis button must be active for axis
substitution information to be output to the NCI file The radius of
the rotary diameter is added to all the Z positions at output  
Simultaneous 4 Axis 11 gcode
Full 4 axis toolpaths can be generated from various toolpaths under the 
multiaxis' selection ie Rotary 4 axis All 5 axis paths are
converted to 4 axis paths where only the angle about the rotation axis
is resolved 
Drill
All drill methods are supported in the post  See Simultaneous 4 Axis
Additional Notes
1 Disable 4 axis by setting the numbered question 164 to 'n'
2 G54 calls are generated where the work offset entry of 0  G54
   1  G55 etc
3 Metric is applied from the NCI mettool variable
4 Incremental mode calculates motion from home position at toolchanges
   The home position is used to define the last position of the tool
   for all toolchanges  
5 The variable 'absinc' is now predefined set mi2 Misc Integer for
   the 'top level' absolute/incremental program output  Subprograms are
   updated through the Mastercam dialog settings for subprograms
6 Always avoid machining to the center of rotation with rotary axis!
7 Transform subprograms are intended for use with G54 workshifts 
Programmers Note
01/30/02    Mpmaster based on CNC Software's V8/V9 Mpfan dat
01/30/02    Initial post update for V9 dat
04/01/02    Comments repeated in translational subs dat
05/01/02    lockcodes logic tweak dat
05/07/02    arccheck set to 3 dat
05/17/02    Removed null comment from subs dat
05/24/02    Rotary subprograms mod dat
07/17/02    Incremental drilling calculation mod dat
07/25/02    Switch added to control rotary index move retracts dat
10/07/02    forcedpts switch added dat
10/28/02    Additional rotary sub logic mod dat
11/06/02    Switch added for 4/3 decimal place tapping feeds dat
03/10/03    Synched with updates to Mpfan from V91 dat
04/30/03    arccheck set to 1 dat
05/08/03    A2100style G18/G19 helical move corrections dat
06/27/03    Initial post update for V91 SP1 dat
10/23/03    Roughed out autolaunch of HTMLset dat
12/12/03    Comp on arc move warning added dat
04/23/04    nonretract index mod dat
XXX MM/DD/04    Written for Company X from Mpmaster xxx
Features     
